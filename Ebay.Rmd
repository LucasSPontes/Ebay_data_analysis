---
title: "**Data Preparation & Machine Learning with Ebay Shill Bidding data**"
author: "Lucas Pontes"
date: "`r format(Sys.time(), '%d %B %Y')`"
output: 
  html_document:
    toc: true
    toc_depth: 2
---

```{r data, include = FALSE}
library(readr)
library(dplyr)
library(naniar)
library(treemapify)
library(ggplot2)
library(reshape2)
library(viridis)
SBD <- read_csv("https://archive.ics.uci.edu/ml/machine-learning-databases/00562/Shill%20Bidding%20Dataset.csv")
```

# **Introduction**

  The Shill Bidding Data set (`SBD`) comprise eBay auctions with many different features, including the duration of the auctions, bidder tendency and class, among others (Alzahrani and Sadaoui, 2018). The aim of this report is to submit the data to different supervised and unsupervised machine learning methods after properly characterisation and preparation of the dataset. To achieve the best result a scaling method will be applied and compared alongside feature reduction methods, machine-learning methods applied will also have the performance and accuracy level measured and compared. At the end of this report, the supervised and  unsupervised methods will be identified in order to work with optimal performance in the Shill Bidding Dataset. The predictions related to normal and abnormal bidding behaviour of eBay users may help companies to identify scams and other undesirable users within the platform.



# **Data preparation**

## **Data characterisation**

  Data characterisation is defined as the pre-processing phase of summarization of the different features and characteristics presents in the observations of a given data set, this process may be accomplished by introducing the data to the viewer using statistics measure summaries, and presenting visually using graphs, like bar charts and scatter plots (Capozzoli, Cerquitelli and Piscitelli, 2016; Han, Kamber and Pei, 2012).



```{r}
SBD
glimpse(SBD)
summary(SBD)
```
  A first glance at `SBD` shows 6321 observations for 13 features, the first three columns represent the record ID, auction and the bidder respectively. The dplyr glimpse function displays all columns beside bidder ID as numeric, however, class and all IDs columns should be treated as a character class.
  
  
```{r include = FALSE}
SBD$Class<-as.factor(SBD$Class)
SBD$Record_ID<-as.character(SBD$Record_ID)
SBD$Auction_ID<-as.character(SBD$Auction_ID)
SBD$Bidder_ID<-as.character(SBD$Bidder_ID)
```
  
```{r}
summary(SBD)
```
  
  The summary function exhibits some general descriptive statistics, it is noticeable that the data have been pre-processed as auction duration range from 0 to 10 and all other numerical features range from 0 to 1.

### Exploratory Graphs

```{r}
vis_miss(SBD)
```

  As displayed by the graphic generated by naniar function "vis_miss" on `SBD`, the data does not include any standard missing value.


```{r include = FALSE}
prop <- SBD %>%
  count(Class)
```

```{r}

ggplot(prop, 
       aes(fill = Class, 
           area = n,
           label = c("Normal", "Abnormal"))) +
  geom_treemap() + 
  geom_treemap_text(colour = "white", 
                    place = "centre") +
  labs(title = "Proportion of normal and abnormal bidding behaviour")

```

```{r}
table(SBD$Class)
round(prop.table(table(SBD$Class)),digits=2)
```

As displayed by the treemap and proportion table above, only 10.7% (675 observations) of the biddings on `SBD` are considered abnormal. The graph above does a great job showing the proportion. The conventional use of pie charts is not recommended to display proportion, especially when the feature contains multiple unique observations or small fractions, Human perception does not comprehend angular proportions in pie charts as it should (Hunt, 2019). 


```{r include = FALSE}
SBD_matrix <- as.matrix(SBD[, c(4:11)])
corr_mat <- round(cor(SBD_matrix),2)
melted_corr_mat <- melt(corr_mat)
```


```{r}
ggplot(data = melted_corr_mat, aes(x=Var1, y=Var2,
                                   fill=value)) +
geom_tile() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
scale_fill_viridis(discrete=FALSE) +
geom_text(aes(Var2, Var1, label = value),
          color = "black", size = 4) +
  labs(title = "Correlation Analysis")
```

The heatmap above shows the correlation between all numerical features in a single graph. The problem with heatmaps is that slight colour intensity variations can be hard to perceive by human eyes, especially with certain colour combinations. Approximately 8% of men and 0.5% of women have some form of colourblindness (BioTuringâ€™s Blog, 2018; Colour Blind Awareness, n.d.). The ggplot graph above has a colourblind friendly colour palette and an added numerical scale, allowing the viewer to check the exact correlation between the variables, as an example, the positive correlation between early and last bidding features is notorious. Another noticeable correlation is the negative one between the winning ratio and auction bids, for further investigation, both will be displayed in a scatter plot.




